<div ng-controller="ConcShowCtlr">  
    <div class="box box-default show-scroll">
        <md-button class="md-icon-button md-primary" aria-label="Back" ng-if="mobile" ng-click="switchIndex()">
            <md-icon class="material-icons">arrow_back</md-icon>
        </md-button>
        <div class="show_content" data-slim-scroll data-scroll-height="auto">
            <h2>Solicitud de conciliación No.1342</h2>
            <h3>{{getState()}}</h3>

            <div ng-if="conc.state == 'pagada' && Session.getRole() == 'coordinator'">
                <h4>¿El centro de conciliacion acepta esta solicitud como valida?</h4>
                <ul class="horizontal_align">
                    <li><button class="md-raised btn-w-md md-primary md-button md-ink-ripple" ng-click="coordAccept('aceptada')">Aceptar</button></li>
                    <li><button class="md-raised btn-w-md md-warn md-button md-ink-ripple" ng-click="coordAccept('denegada')">Denegar</button></li>
                </ul>
            </div>

            <div ng-if="conc.state == 'aceptada' && Session.getRole() == 'coordinator' || onc.state == 'denegada_por_conciliador' && Session.getRole() == 'coordinator'">
                <h4>Asignacion de conciliador</h4>
                <p>Seleccione un conciliador de la lista para asignarlo a esta solicitud.</p>
                <md-list-item class="md-3-line" ng-repeat="con in conciliators" ng-click="setConciliator(con)">
                    <div class="md-list-item-text" layout="column">
                        <h3>{{getUserName(con)}}</h3>
                    </div>
                </md-list-item>  
            </div>

            <div ng-if="conc.state == 'pendiente_por_aceptacion_de_conciliador' && Session.getRole() == 'conciliator'">
                <h4>¿Usted acepta esta conciliación?</h4>
                <ul class="horizontal_align">
                    <li><button class="md-raised btn-w-md md-primary md-button md-ink-ripple" ng-click="conAccept('aceptada_por_conciliador')">Aceptar</button></li>
                    <li><button class="md-raised btn-w-md md-warn md-button md-ink-ripple" ng-click="conAccept('denegada_por_conciliador')">Denegar</button></li>
                </ul>
            </div>


            <div ng-if="(conc.state == 'aceptada_por_conciliador' || conc.state == 'programar_audiencia') && Session.getRole() == 'conciliator'">
                <h4>Programar audiencia</h4>
                <p>Seleccione en el siguiente horario una hora disponible y en el cuadro nueva audiencia arrastrelo de la parte inferior para cambiar la longitud de la audiencia, cuando la quiera programar en la fecha y hora deseada oprima el boton programar.</p>
                <div id="programCalendar" ng-model="events" calendar="programCalendar" config="uiConfig.programCalendar" ui-calendar="uiConfig.programCalendar"></div>
                <button class="md-raised btn-w-md md-primary md-button md-ink-ripple" ng-click="programAudience()">Programar</button>
            </div>

            <div ng-if="conc.state == 'programada' && Session.getRole() == 'conciliator'">
                <button class="md-raised btn-w-md md-primary md-button md-ink-ripple" ng-click="toAudience()">Ir a Audiencia</button>
            </div>

            <h4><b>Convocantes</b></h4>
            <md-list-item class="md-3-line" ng-repeat="conv in getConvocantes()" ng-click="showParticipant(conv, $event)">
                <div>
                    <md-icon class="material-icons">{{getIcon(conv)}}</md-icon>
                    <div class="md-list-item-text" layout="column">
                        <h3>{{getName(conv)}}</h3>
                        <h4>{{getID(conv)}}</h4>
                        <p>Teléfono: {{conv.involved.phone}}</p>
                    </div>
                    <div class="md-secondary">
                        <md-icon ng-if="conc.state == 'programada' && Session.getRole() == 'conciliator'" class="material-icons md-secondary" aria-label="Agregar apoderado" ng-click="getNotification(conv)">assignment</md-icon>
                    </div>
                </div>
            </md-list-item>
            <h4><b>Convocados</b></h4>
            <md-list-item class="md-3-line" ng-repeat="conv in getConvocados()" ng-click="showParticipant(conv, $event)">
                <div>
                    <md-icon class="material-icons">{{getIcon(conv)}}</md-icon>
                    <div class="md-list-item-text" layout="column">
                        <h3>{{getName(conv)}}</h3>
                        <h4>{{getID(conv)}}</h4>
                        <p>Teléfono: {{conv.involved.phone}}</p>
                    </div>
                </div>
                <div class="md-secondary">
                    <md-icon ng-if="conc.state == 'programada' && Session.getRole() == 'conciliator'" class="material-icons md-secondary" aria-label="Agregar apoderado" ng-click="getNotification(conv)">assignment</md-icon>
                </div>
            </md-list-item>
            <h4><b>Hechos</b></h4>
            <div class="infoContainer">
                <div ng-repeat="hecho in conc.conciliation.facts">
                    <p><b>{{$index + 1}}.</b> {{hecho.description}}</p>
                </div>
            </div>
            <h4><b>Pretensiones</b></h4>
            <div ng-repeat="pret in conc.conciliation.pretensions">
                <div class="infoContainer">
                    <p><b>{{$index + 1}}.</b> {{pret.description}}</p>
                </div>
            </div>
            <h4><b>Anexos y pruebas</b></h4>
            <md-list-item class="md-2-line" ng-repeat="p in proofs" ng-click="showProof(p)">
                <p><b>{{$index + 1}}.</b> {{p.name}}</p>
            </md-list-item>
            <h4><b>Audiencias</b></h4>
            <md-list-item class="md-2-line" ng-repeat="a in audiences" ng-click="showAudience(a, $event)">
                <p><b>{{$index + 1}}.</b> Audiencia {{a.start}}</p>
            </md-list-item>
            <h4><b>Documentos</b></h4>
            <md-list-item class="md-2-line" ng-repeat="d in documents" ng-click="showDocument(d)">
                <p><b>{{$index + 1}}.</b> {{d.name}}</p>
            </md-list-item>

            <h3><b>Cuantía</b> $ {{conc.conciliation.payment_amount}}</h3>

            <button ng-if="Session.getRole() == 'conciliator'" class="md-raised btn-w-md md-primary md-button md-ink-ripple" ng-click="getDocument()">Generar solicitud de conciliacion</button>
            <!-- <section class="box box-default">
                <div class="box-body no-padding">                
                    <md-tabs md-selected="selectedIndex" md-border-bottom md-autoselect>
                        <md-tab ng-repeat="tab in tabs"
                                ng-disabled="tab.disabled"
                                label="{{tab.title}}">
                            <div class="tab{{$index}}" style="padding: 25px; text-align: center;">
                                <div ng-repeat="item in tab.info">
                                    <ul>
                                        <div ng-bind="item.nombre" ng-click="click()"></div>
                                    </ul>
                                </div>
                                <br/>
                            </div>
                        </md-tab>
                    </md-tabs> 
                </div>
            </section> -->
        </div>
    </div>
</div>